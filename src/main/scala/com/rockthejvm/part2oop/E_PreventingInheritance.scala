package com.rockthejvm.part2oop

// ===============================
// ç¬¬äº”ç« ï¼šé˜²æ­¢ç»§æ‰¿ (Preventing Inheritance)
// ===============================
object E_PreventingInheritance {

  // -----------------------------------
  // 1ï¸âƒ£ final æˆå‘˜ï¼šé˜²æ­¢è¢«å­ç±»è¦†å†™ï¼ˆoverrideï¼‰
  // -----------------------------------
  class Person(name: String) {

    // ä½¿ç”¨ final ä¿®é¥°æ–¹æ³•ï¼Œè¡¨ç¤ºæ­¤æ–¹æ³•ä¸èƒ½åœ¨å­ç±»ä¸­è¢«è¦†å†™
    final def enjoyLife(): Int = 42 // 42ï¼šç”Ÿå‘½çš„æ„ä¹‰ ğŸ˜„
  }

  class Adult(name: String) extends Person(name) {
    // âŒ ä¸‹é¢çš„ä»£ç ä¼šç¼–è¯‘é”™è¯¯ï¼Œå› ä¸º enjoyLife æ˜¯ final æ–¹æ³•ï¼Œä¸èƒ½è¢« override
    // override def enjoyLife() = 999
  }

  // -----------------------------------
  // 2ï¸âƒ£ final ç±»ï¼šé˜²æ­¢è¢«ç»§æ‰¿ï¼ˆextendsï¼‰
  // -----------------------------------
  final class Animal
  // âŒ ä»¥ä¸‹ä¼šç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½ç»§æ‰¿ final ç±»
  // class Cat extends Animal

  // -----------------------------------
  // 3ï¸âƒ£ sealed ç±»ï¼šå…è®¸â€œå—æ§ç»§æ‰¿â€
  // -----------------------------------
  // sealed è¡¨ç¤ºè¯¥ç±»çš„ç»§æ‰¿åªèƒ½å‡ºç°åœ¨â€œåŒä¸€ä¸ªæ–‡ä»¶ä¸­â€
  // âœ… æ–‡ä»¶å¤–æ— æ³•å†æ‰©å±• Guitar
  sealed class Guitar(nStrings: Int)

  // è¿™äº›å­ç±»éƒ½å®šä¹‰åœ¨åŒä¸€æ–‡ä»¶ä¸­ â†’ åˆæ³•
  class ElectricGuitar(nStrings: Int) extends Guitar(nStrings)
  class AcousticGuitar extends Guitar(6)

  // sealed ç±»çš„å¸¸è§ç”¨é€”ï¼š
  // - é€šå¸¸ä¸ â€œæ¨¡å¼åŒ¹é… (pattern matching)â€ ä¸€èµ·ä½¿ç”¨
  // - Scala ç¼–è¯‘å™¨èƒ½çŸ¥é“æ‰€æœ‰å¯èƒ½çš„å­ç±»å‹ï¼Œç¡®ä¿åŒ¹é…å®Œæ•´æ€§

  // -----------------------------------
  // 4ï¸âƒ£ open ç±»ï¼ˆScala 3 ç‰¹æœ‰ï¼‰
  // -----------------------------------
  // é»˜è®¤æƒ…å†µä¸‹ï¼ŒScala ä¸é¼“åŠ±éšæ„ç»§æ‰¿ï¼ˆä¸ Java ç›¸åï¼‰
  // å¦‚æœå¸Œæœ›ç±»å¯ä»¥æ˜ç¡®åœ°è¢«ç»§æ‰¿ï¼Œåº”ä½¿ç”¨ `open` å…³é”®å­—æ ‡è®°
  // è¿™æ˜¯ä¸€ç§è®¾è®¡ä¸Šçš„â€œæ„å›¾å£°æ˜â€ï¼Œå‘Šè¯‰ä½¿ç”¨è€…è¿™ä¸ªç±»æ˜¯å¯æ‰©å±•çš„
  open class ExtensibleGuitar(nStrings: Int)

  // ï¼ˆopen ç±»åªæ˜¯å…è®¸æ‰©å±•ï¼Œä¸æ˜¯å¼ºåˆ¶ã€‚ï¼‰
  // è‹¥ä¸€ä¸ªç±»æ²¡æœ‰æ ‡è®°ä¸º openï¼Œä½†è¢«ç»§æ‰¿ï¼Œä¹Ÿä¸ä¼šç¼–è¯‘é”™è¯¯ï¼Œ

  
  def main(args: Array[String]): Unit = {
    val person = new Person("Alice")
    println(person.enjoyLife()) // è¾“å‡º 42
  }
  
}
